<!DOCTYPE html>
<html>
<head>
  <title>Bike Tracker Map</title>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <!-- Leaflet Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    #map { height: 300px; }
  </style>
</head>

<body>

<h2>üèç Bike Live Location</h2>
<div id="map"></div>
<p id="info">Waiting...</p>

<script>
  // Your Firebase config
  var firebaseConfig = {
    apiKey: "AIzaSyDiSckMMD055k9cxend3oesbv2B2MBwOjI",
    databaseURL: "https://bikegps-1ae85-default-rtdb.asia-southeast1.firebasedatabase.app"
  };

  firebase.initializeApp(firebaseConfig);
  var db = firebase.database();

  // Create map
  var map = L.map('map').setView([23.81, 90.41], 13);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap'
  }).addTo(map);

  var marker = L.marker([23.81, 90.41]).addTo(map);

  // Listen to Firebase
  db.ref("bikeTracker").on("value", snap => {
    let d = snap.val();
    if (d) {
      let lat = d.latitude;
      let lng = d.longitude;

      marker.setLatLng([lat, lng]);
      map.setView([lat, lng]);

      document.getElementById("info").innerHTML =
        `Lat: ${lat} | Lng: ${lng} | Speed: ${d.speed} km/h`;
    }
  });
</script>

</body>
</html>
